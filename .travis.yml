language: julia
julia:
  # Test against these exact versions
  #- 0.6.2
  - 0.6.3
dist: trusty
sudo: false
matrix:
  include:
    - os: linux
      before_install:
        - docker build -t ubuntu_with_cmake .ci
   
    # OSX build using clang
    - os: osx
      compiler: "clang"

install:
  # On Linux, do the build within docker, on OSX just run the build directly
  - if [ $(uname) == Linux ]; then
      docker run -t ubuntu_with_cmake -v $(pwd):/build -w /build .ci/build.sh;
    elif [ $(uname) == Darwin ]; then
      .ci/build.sh;
    fi

script:
  - ctest -V

notifications:
  email: true
